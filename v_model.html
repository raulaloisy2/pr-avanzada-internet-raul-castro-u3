<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Usando Vue Rulo</title>
    <link rel="stylesheet" type="text/css" href="index.css">
    <link rel="stylesheet" type="text/css" href="table.css">

</head>

<body>
    <div class="container" id="container_app">

    <form class="login"  v-if="!is_login">
        <input type="text" placeholder="Username" v-model ="email" email ="">
        <input type="password" placeholder="Password" v-model="password" password="" >
        <button  @click ="login">Login</button>
      </form>



      <table class="customTable" v-if="is_login">
        <thead>
          <tr>
            <th>Personal data</th>
            <th>Contact data</th>
            <th>Company Data</th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="u in users">
            <td>{{u.name}}, {{u.username}}</td>
            <td>{{u.email}}, {{u.phone}}</td>
            <td>{{u.company.name}}, {{u.company.bs}}</td>
          </tr>

        </tbody>
      </table>
      <!-- Generated at CSSPortal.com -->
      
    </div>
      
      <a href="https://codepen.io/davinci/" target="_blank">check my other pens</a>
    <center>
    <!-- <br> <br>
    <div class="container" id="container_app">
        <h1> Â¡Hola  {{ name }}  ! </h1><br>
        
        <input type="text" v-model="name" name=""><br>

        <button @click="count++">
            Count is {{count}}
        </button><br><br>
        <input type="" v-model="num1" name=""><br>
        <input type="" v-model="num2" name=""><br>

        <button @click="total= ((+num1)+(+num2))">
            Suma dos numeros
        </button>

        <h2>El Resultado es : <span v-if="total!=0"> {{total}}</h2> </span>
        <hr>
        <br>
        <br>

        <form action="">
            <fieldset>
                <legend> Nombre</legend>
                <input type="text" v-model="username" name="">
            </fieldset>
            <fieldset>
                <legend>Apellido</legend>
                <input type="text" v-model="lastname" name="">
            </fieldset>

            <button type="button" v-on:click="addPerson">REGISTRAR PERSONA</button>
        </form>

        <ul>
            <li v-for="item in  persons">
                {{item.name}} - {{item.apellido}}
            </li>
        </ul>
    


    </div> -->

    

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script type="text/javascript">

        const { createApp, ref } = Vue

        createApp({
          setup(){

            users= ref([]);
            email= ref('');
            password = ref('');

           
         let tmp = false;
         tmp = localStorage.getItem("is_login");
         if(tmp == null){
             tmp = false;
         }
            is_login = tmp;
            console.log(is_login)
       
                return {
                    users,
                    email,
                    password,
                    is_login
                }
          },


          mounted: function(){
            const getUsers = async () =>{
                const response = await fetch("user.json?v=1.1");
                const tmp_users= await response.json();
                this.users = tmp_users;
            }
            if(this.is_login){
                getUsers();
            }
          },
          methods:{
            async login(){
                const response =await fetch("user.json?v=1.1");
               this.users= await response.json();
               this.is_login=false;

                this.users.forEach((users)=>
                {
                    if(this.email == users.email){
                        if (this.password == users.password){
                            this.is_login=true;
                            alert("Bienvenido");
                            localStorage.setItem("user_data", JSON.stringify(users));
                            localStorage.setItem("is_login", "true");
                        }
                    }
                }

                );
                
            
            }
          },
          update(users){
            console.log("hola");
          }
        }).mount('#container_app');
        /*
       

        createApp({
        setup() {
            const message ="";
            const name ="";
            const num1 =0;
            const num2 =0;
            const total =0;
            const username = ref(''), lastname = ref('');
            const persons = ref([]);
            return {
                name: ref(''),
                count: ref(0),
                num1: ref(0),
                num2: ref(0),
                total: ref(0),
                username,
                lastname,
                persons
               
            }
   
        },
        methods:{
                addPerson(){
                    const person= {
                        name:this.username,
                       apellido:this.lastname

                    }
                    this.persons.push(person)
                    console.log("Hola Crayola");
                    console.log(this.username);
                    console.log(this.lastname);
                }
        }
        }).mount('#container_app')

    */
    </script>
</center>
</body>

</html>